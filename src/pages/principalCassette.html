<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sanitaria Ribera</title>
  <!-- cdn de Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/index.css">
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg_login bg-blue-100 min-h-screen">
  <div class="container mx-auto max-w-[1400px] p-8">

    <!-- ALERTA PERSONALIZADA -->
    <div id="customAlert" class="fixed top-5 right-5 bg-red-500 text-white px-3 py-1 rounded-lg shadow-lg hidden">
      <span id="alertMessage">Error</span>
    </div>

    <!-- Header -->
    <div class="flex justify-between bg-gradient-to-r from-blue-400 to-blue-600 text-white  rounded-xl shadow-lg">
      <div class="flex flex-wrap justify-between gap-6 items-center p-4 rounded-lg bg-white shadow-md m-1">
        <!-- Órganos -->
        <div class="flex-1 min-w-[220px]">
          <label for="organos" class="block text-sm font-semibold text-gray-700 mb-1">Órganos</label>
          <select id="organos" class="form-select w-full p-2 rounded-lg border border-gray-300 bg-gray-50 shadow-sm focus:ring-blue-400 focus:border-blue-500 text-gray-900">
            <option disabled selected>Seleccionar un Órgano</option>
            <option value="*">Todos</option>
            <optgroup label="Sistema Nervioso">
              <option>Encéfalo</option>
              <option>Médula Espinal</option>
              <option>Nervio</option>
              <option>Ganglio Nervioso</option>
            </optgroup>
            <optgroup label="Tegumento">
              <option>Piel</option>
              <option>Uña</option>
              <option>Pelo</option>
            </optgroup>
            <optgroup label="Cardiovascular">
              <option>Corazón</option>
              <option>Venas</option>
              <option>Arteria</option>
            </optgroup>
            <optgroup label="Linfático">
              <option>Ganglio Linfático</option>
              <option>Timo</option>
              <option>Bazo</option>
            </optgroup>
            <optgroup label="Sistema Digestivo">
              <option>Lengua</option>
              <option>Esófago</option>
              <option>Estómago</option>
              <option>Intestino Delgado</option>
              <option>Intestino Grueso</option>
              <option>Diente</option>
              <option>Glándula Salivar</option>
              <option>Páncreas</option>
              <option>Hígado</option>
            </optgroup>
            <optgroup label="Aparato Excretor">
              <option>Riñón</option>
              <option>Vejiga</option>
            </optgroup>
            <optgroup label="Respiratorio">
              <option>Tráquea</option>
              <option>Bronquios</option>
              <option>Tejido Respiratorio</option>
            </optgroup>
            <optgroup label="Endocrino">
              <option>Tiroides</option>
              <option>Parótidas</option>
              <option>Suprarrenales</option>
              <option>Ovario</option>
              <option>Testículo</option>
            </optgroup>
            <optgroup label="Locomotor">
              <option>Hueso</option>
              <option>Músculo Esquelético</option>
            </optgroup>
            <option>Otros</option>
          </select>
        </div>
      
        <!-- Código QR -->
        <div class="flex-1 min-w-[180px]">
          <label for="qr" class="block text-sm font-semibold text-gray-700 mb-1">Escanear QR</label>
          <input type="text" id="qr" class="w-full p-2 rounded-lg border border-gray-300 bg-gray-50 shadow-sm focus:ring-blue-400 focus:border-blue-500 text-gray-900" placeholder="Escanear QR">
        </div>
      
        <!-- Fecha 1 -->
        <div class="flex-1 min-w-[200px]">
          <label for="fecha1" class="block text-sm font-semibold text-gray-700 mb-1">Fecha inicio</label>
          <input type="date" id="fechaInicioInput" class="w-full p-2 rounded-lg border border-gray-300 bg-gray-50 shadow-sm focus:ring-blue-400 focus:border-blue-500 text-gray-900">
        </div>
      
        <!-- Fecha 2 -->
        <div class="flex-1 min-w-[200px]">
          <label for="fecha2" class="block text-sm font-semibold text-gray-700 mb-1">Fecha fin</label>
          <input type="date" id="fechaFinInput" class="w-full p-2 rounded-lg border border-gray-300 bg-gray-50 shadow-sm focus:ring-blue-400 focus:border-blue-500 text-gray-900">
        </div>
      </div>

      <!-- Logo -->
      <div class="hidden md:flex flex-col items-center justify-center mr-9">
        <img src="../assets/images/logo.png" alt="Sanitaria Ribera" class="w-12 h-12 object-contain">
        <h1 class="text-lg font-bold text-white text-center">Sanitaria Ribera</h1>
      </div>
    </div>


    <!-- Main content -->
    <main class="mt-8 space-y-8">
      <!-- Sección CASSETTES y DETALLE CASSETTE en columnas -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Sección CASSETTES -->
        <section class="bg-white border border-blue-300 rounded-xl p-6 shadow-lg md:col-span-2">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-center text-blue-800 font-bold text-xl">CASSETTES</h2>
            <button class="" id="btnNuevo">
              <i class="fa-solid fa-file text-green-500 hover:text-green-600 transition-all text-xl"></i>
            </button>
          </div>
          <div class="overflow-y-auto max-h-64 border border-blue-300 rounded-lg">
            <table class="table-auto w-full bg-blue-50">
              <thead class="bg-blue-200 sticky top-0">
                <tr id='order'>
                  <th id='orderFecha' class="hover:text-black cursor-pointer px-5 py-2 text-left text-blue-700">Fecha</th>
                  <th id='orderDescripcion' class="hover:text-black cursor-pointer px-5 py-2 text-left text-blue-700">Descripción</th>
                  <th id='orderOrgano' class="hover:text-black cursor-pointer px-5 py-2 text-left text-blue-700">Órgano</th>
                </tr>
              </thead>
              <tbody id="tbody" class="hover:bg-blue-100 cursor-pointer"></tbody>
            </table>
          </div>          
        </section>
      
        <!-- Sección DETALLE CASSETTE -->
        <section class="bg-white border border-blue-300 rounded-xl p-6 shadow-lg md:col-span-1 self-start max-h-[250px]">
          <div class="flex justify-between items-center">
            <h2 class="text-blue-800 font-bold text-xl">DETALLE CASSETTE</h2>
            <div class="flex space-x-4">
              <button class="" id="btnModificarDetalle">
                <i class="fa-solid fa-pen text-yellow-500 hover:text-yellow-600 transition-all text-xl"></i>
              </button>
              <button class="" id="btnBorrarDetalle">
                <i class="fa-solid fa-trash text-red-500 hover:text-red-600 transition-all text-xl"></i>
              </button>
            </div>
          </div>
          <ul class="list-none mt-4 space-y-3 text-gray-800 text-sm">
            <li><span class="font-bold">Descripción:</span> <span id="cassette__descripcion">---</span></li>
            <li><span class="font-bold">Órgano:</span> <span id="cassette__organo">---</span></li>
            <li><span class="font-bold">Características:</span> <span id="cassette__caracteristicas">---</span></li>
            <li><span class="font-bold">Observaciones:</span> <span id="cassette__observaciones">---</span></li>
          </ul>
        </section>
      </div>

    
      <!-- Sección MUESTRAS debajo -->
      <section class="bg-white border border-blue-300 rounded-xl p-6 shadow-lg overflow-y-auto mt-8">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-center text-blue-800 font-bold text-xl">MUESTRAS</h2>
          <button class="" id="btnNuevaMuestra">
            <i class="fa-solid fa-file text-green-500 hover:text-green-600 transition-all text-xl"></i>
          </button>
        </div>
        <table class="table-auto w-full bg-blue-50 border border-blue-300 rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-blue-200">
              <th class="px-5 py-2 text-left text-blue-700">Fecha</th>
              <th class="px-5 py-2 text-left text-blue-700">Descripción</th>
              <th class="px-5 py-2 text-left text-blue-700">Tinción</th>
              <th class="px-5 py-2 text-left text-blue-700"></th>
            </tr>
          </thead>
          <tbody id="muestra__tbody">
          </tbody>
        </table>
      </section>

      <!-- Sección TABLA ADMINISTRADOR -->
      <section class="bg-white border border-blue-300 rounded-xl p-6 shadow-lg overflow-y-auto mt-8">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-center text-blue-800 font-bold text-xl">GESTIÓN ADMINISTRATIVA</h2>
        </div>
        <table class="table-auto w-full bg-blue-50 border border-blue-300 rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-blue-200">
              <th class="px-5 py-2 text-left text-blue-700">Nombre</th>
              <th class="px-5 py-2 text-left text-blue-700">Apellidos</th>
              <th class="px-5 py-2 text-left text-blue-700">Email</th>
              <th class="px-5 py-2 text-left text-blue-700">Rol</th>
              <th class="px-5 py-2 text-left text-blue-700">Controles</th>
            </tr>
          </thead>
          <tbody id="administracion__tbody">
          </tbody>
        </table>
      </section>

    </main>

  </div>

  <!---------------- MODALES -------------------->

  <!-- Modal Nuevo Cassette -->
  <div id="modalCassette" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div class="mt-3 text-center">
        <h3 class="text-lg leading-6 font-medium text-gray-900" id="modalTitle">Nuevo Cassette</h3>
        <!-- FORM -->
        <form class="mt-2" id="nuevoCassetteForm" method="post" action="">
          <input type="date" required id="modalFecha" placeholder="Fecha" class="w-full p-2 border rounded-md mb-2">
          <input type="text" id="modalDescripcion" placeholder="Descripción" class="w-full p-2 border rounded-md mb-2">
          <select id="modalOrgano" class="w-full p-2 border rounded-md mb-2">
            <option disabled selected>Seleccionar un Órgano</option>
            <optgroup label="Sistema Nervioso">
              <option>Encéfalo</option>
              <option>Médula Espinal</option>
              <option>Nervio</option>
              <option>Ganglio Nervioso</option>
            </optgroup>

            <optgroup label="Tegumento">
              <option>Piel</option>
              <option>Uña</option>
              <option>Pelo</option>
            </optgroup>

            <optgroup label="Cardiovascular">
              <option>Corazón</option>
              <option>Venas</option>
              <option>Arteria</option>
            </optgroup>

            <optgroup label="Linfático">
              <option>Ganglio Linfático</option>
              <option>Timo</option>
              <option>Bazo</option>
            </optgroup>

            <optgroup label="Sistema Digestivo">
              <option>Lengua</option>
              <option>Esófago</option>
              <option>Estómago</option>
              <option>Intestino Delgado</option>
              <option>Intestino Grueso</option>
              <option>Diente</option>
              <option>Glándula Salivar</option>
              <option>Páncrea</option>
              <option>Hígado</option>
            </optgroup>

            <optgroup label="Aparato Excretor">
              <option>Riñón</option>
              <option>Vejiga</option>
            </optgroup>

            <optgroup label="Respiratorio">
              <option>Tráquea</option>
              <option>Bronquios</option>
              <option>Tejido Respiratorio</option>
            </optgroup>

            <optgroup label="Endocrino">
              <option>Tiroides</option>
              <option>Parótidas</option>
              <option>Suprarrenales</option>
              <option>Ovario</option>
              <option>Testículo</option>
            </optgroup>

            <optgroup label="Locomotor">
              <option>Hueso</option>
              <option>Musculo Esquelético</option>
            </optgroup>
            <option>Otros</option>
          </select>
          <input type="text" id="modalCaracteristicas" placeholder="Características" class="w-full p-2 border rounded-md mb-2">
          <input type="text" id="modalObservaciones" placeholder="Observaciones" class="w-full p-2 border rounded-md mb-2">
          <div class="items-center px-4 py-3">
            <button type="submit" id="modalSave" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600">Guardar</button>
            <button id="modalClose" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 mt-2">Cancelar</button>
          </div>
        </form>
        <!-- FORM -->
      </div>
    </div>
  </div>

<!-- Modal para modificar cassette -->
<div id="modalModificarCassette" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
  <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <h3 class="text-lg leading-6 font-medium text-gray-900" id="modalModificarTitle">Modificar Cassette</h3>
      <!-- FORM -->
      <form class="mt-2" id="modificarCassetteForm" method="post" action="">
        <input type="date" disabled id="modalModificarFecha" placeholder="Fecha" class="w-full p-2 border rounded-md mb-2">
        <input type="text" id="modalModificarDescripcion" placeholder="Descripción" class="w-full p-2 border rounded-md mb-2">
        <select id="modalModificarOrgano" class="w-full p-2 border rounded-md mb-2">
          <option disabled selected>Seleccionar un Órgano</option>
          <optgroup label="Sistema Nervioso">
            <option>Encéfalo</option>
            <option>Médula Espinal</option>
            <option>Nervio</option>
            <option>Ganglio Nervioso</option>
          </optgroup>

          <optgroup label="Tegumento">
            <option>Piel</option>
            <option>Uña</option>
            <option>Pelo</option>
          </optgroup>

          <optgroup label="Cardiovascular">
            <option>Corazón</option>
            <option>Venas</option>
            <option>Arteria</option>
          </optgroup>

          <optgroup label="Linfático">
            <option>Ganglio Linfático</option>
            <option>Timo</option>
            <option>Bazo</option>
          </optgroup>

          <optgroup label="Sistema Digestivo">
            <option>Lengua</option>
            <option>Esófago</option>
            <option>Estómago</option>
            <option>Intestino Delgado</option>
            <option>Intestino Grueso</option>
            <option>Diente</option>
            <option>Glándula Salivar</option>
            <option>Páncrea</option>
            <option>Hígado</option>
          </optgroup>

          <optgroup label="Aparato Excretor">
            <option>Riñón</option>
            <option>Vejiga</option>
          </optgroup>

          <optgroup label="Respiratorio">
            <option>Tráquea</option>
            <option>Bronquios</option>
            <option>Tejido Respiratorio</option>
          </optgroup>

          <optgroup label="Endocrino">
            <option>Tiroides</option>
            <option>Parótidas</option>
            <option>Suprarrenales</option>
            <option>Ovario</option>
            <option>Testículo</option>
          </optgroup>

          <optgroup label="Locomotor">
            <option>Hueso</option>
            <option>Musculo Esquelético</option>
          </optgroup>
          <option>Otros</option>
        </select>
        <input type="text" id="modalModificarCaracteristicas" placeholder="Características" class="w-full p-2 border rounded-md mb-2">
        <input type="text" id="modalModificarObservaciones" placeholder="Observaciones" class="w-full p-2 border rounded-md mb-2">
        <div class="items-center px-4 py-3">
          <button type="submit" id="modalModificarSave" type="submit" class="px-4 py-2 bg-yellow-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-yellow-600">Modificar</button>
          <button id="modalModificarClose" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 mt-2">Cancelar</button>
        </div>
      </form>
      <!-- FORM -->
    </div>
  </div>
</div>


  <!-- Modal Borrar Cassette -->
  <div id="modalConfirmarBorrar" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <!-- FORM -->
      <form class="mt-3 text-center" id="BorrarCassetteForm" method="post" action="">
        <button id="modalConfirmarBorrarClose" class="absolute top-0 right-0 mt-2 mr-2 text-gray-500 hover:text-gray-700">&times;</button>
        <h3 class="text-lg leading-6 font-medium text-gray-900">Confirmar Eliminación</h3>
        <div class="mt-2">
          <p>¿Desea eliminar el cassette? Al eliminar el cassette también se eliminarán todas sus muestras.</p>
        </div>
        <div class="items-center px-4 py-3">
          <button id="modalConfirmarBorrarEliminar" type="submit" class="px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600">Eliminar</button>
        </div>
        <!-- FORM -->
      </form>
    </div>
  </div>


<!-- Modal Ver Detalles De Una Muestra -->
<div id="modalMuestra" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
  <div class="relative top-20 mx-auto p-5 border max-w-xl w-full shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <button id="modalMuestraClose" class="absolute top-0 right-0 mt-2 mr-2 text-gray-500 hover:text-gray-700">&times;</button>
      <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Detalles Muestra</h3>

      <div class="mt-4 flex flex-wrap border-b pb-4">
        <!-- Parte de características -->
        <div class="flex-1 min-w-[200px] text-left space-y-2 pr-4 border-r">
          <p>Descripción: <span id="descMuestra">esto es una descripción</span></p>
          <p>Fecha: <span id="fechaMuestra">esto es una fecha</span></p>
          <p>Tinción: <span id="tincionMuestra">esto es una tinción</span></p>
          <p>Observación: <span id="obserMuestra">esto es una observación</span></p>
        </div>

        <!-- Imagen  -->
        <div class="flex-1 flex flex-col items-center space-y-2 pl-4 min-w-[200px]">
          <img src="" id="imagenMuestra" alt="imagen de la muestra" class="w-40 h-40 object-cover border">
        </div>
      </div>
      
<!-- Parte de imagen adicional y botón Añadir -->
<div class="mt-4 flex flex-wrap items-center gap-4">
  <div class="mt-4 flex flex-wrap items-center gap-4" id="imagenesMuestra">
    <!-- Inserción de imagenes que pertenecen a la muestra -->
    <!-- <img id="previewImage" src="" alt="imagen de la muestra" class="w-32 h-32 object-cover border"> -->
  </div>
</div>

    </div>
  </div>
</div>

<!-- Modal Modificar Muestra -->

<div id="modalMuestraModificar" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
  <div class="relative top-20 mx-auto p-5 border max-w-xl w-full shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Detalles Muestra</h3>

      <form id="formMuestra" class="mt-4 flex flex-wrap border-b pb-4" novalidate>
        <!-- Parte de características -->
        <div class="flex-1 min-w-[200px] text-left space-y-2 pr-4 border-r">
          <label for="muestraDescripcion">Descripción:</label>
          <input type="text" id="muestraDescripcion" class="w-full border rounded p-1">

          <label for="muestraFecha">Fecha:</label>
          <input type="date" id="muestraFecha" class="w-full border rounded p-1">

          <select id="muestraTincion" class="w-full p-2 border rounded-md mb-2">
            <option disabled selected>Seleccionar Tinción</option>
            <option>Hematoxilina Eosina (HE)</option>
            <option>Giemsa</option>
            <option>Gram</option>
            <option>Azul de Metileno</option>
            <option>Papanicolau</option>
          </select>

          <label for="muestraObservacion">Observación:</label>
          <textarea id="muestraObservacion" class="w-full border rounded p-1"></textarea>

        </div>

        <!-- Imagen y botón Eliminar -->
        <div class="flex-1 flex flex-col items-center space-y-2 pl-4 min-w-[200px]">
          <label for="modalMuestraImagen" class="cursor-pointer bg-blue-500 text-white px-4 py-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300">
            📁 Añadir Muestra
        </label>
        <input type="file" id="modalMuestraImagen" class="hidden">
          <button id="modalMuestraEliminar" class="px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600">Eliminar</button>
          <img src="" id="imagenMuestraModificar" alt="imagen de la muestra" class="w-40 h-40 object-cover border">
        </div>
        <div class="items-center px-4 py-3">
          <button type="submit" id="modalMuestraSaveModify" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600">Guardar</button>
          <button id="modalMuestraCloseModify" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 mt-2">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</div>
  
<!-- Modal Nueva Muestra -->
<div id="modalNuevaMuestra" class="fixed inset-0 overflow-y-auto h-full w-full hidden modal">
  <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
    <div class="mt-3 text-center">
      <h3 class="text-lg leading-6 font-medium text-gray-900">Nueva Muestra</h3>
      <!-- FORM NUEVA MUESTRA -->
      <form class="mt-2" id="nuevaMuestraForm" method="post" action="">
        <input type="date" id="modalMuestraFecha" placeholder="Fecha" class="w-full p-2 border rounded-md mb-2">
        <input type="text" id="modalMuestraDescripcion" placeholder="Descripción" class="w-full p-2 border rounded-md mb-2">
        <select id="modalMuestraTincion" class="w-full p-2 border rounded-md mb-2">
          <option disabled selected>Seleccionar Tinción</option>
          <option>Hematoxilina Eosina (HE)</option>
          <option>Giemsa</option>
          <option>Gram</option>
          <option>Azul de Metileno</option>
          <option>Papanicolau</option>
        </select>
        <input type="text" id="modalMuestraObservaciones" placeholder="Observaciones" class="w-full p-2 border rounded-md mb-2">
        <input type="file" id="modalMuestraImagenCreada" accept="image/*" class="w-full p-2 border rounded-md mb-2">
        <div class="items-center px-4 py-3">
          <button id="modalMuestraSave" type="submit" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600">Guardar</button>
          <button id="modalMuestraClose" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 mt-2">Cancelar</button>
        </div>
        <!-- FORM -->
      </form>
    </div>
  </div>
</div>

  <!-- Script -->
  <script src="../js/principalCassette.js"></script>
</body>
</html>